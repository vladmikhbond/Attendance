@page
@model Attendance.Pages.Reports.MeetsModel
@{
}

<form asp-page="Index" asp-page-handler="Save" method="post">
    <input asp-for="GroupFilter" placeholder="Group Filter" />
    <input type="submit" value="Filter" title="Group Filter" />
</form>

<hr />

@if (Model.Sudents != null && Model.Sudents.Length > 0)
{
    <table border="1">
        <tr>
            <td></td>
            @foreach (var meet in Model.Meets)
            {
                <td title="@meet.When - @meet.Comment." style="width:20px">M</td>
            }
        </tr>

        @foreach (var group in Model.Sudents.GroupBy(s => s.Group))
        {
            <tr>
                <td style="font-weight:800">@group.Key (@group.Count(x => x.IsPresent) из @group.Count() )</td>
            </tr>
            @foreach (var stud in group)
            {
                <tr>
                    <td style="text-align:left; ">@stud.Surname @stud.Name</td>
                    @foreach (var meet in Model.Meets)
                    {
                        var mark = meet.MeetStudents.Single(ms => ms.StudentId == stud.Id).IsPresent ? " " : "н";
                        <td>@mark</td>
                    }
                </tr>
            }
        }
    </table>
}








